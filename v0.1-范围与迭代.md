# v0.1 最小可实施方案：范围与迭代规划

**版本**: v0.1.0  
**更新时间**: 2025-11-11

> 说明：遵循工作区规则——每次更新记得更新版本号；模块化开发，保持代码清晰。

## 目标与非目标
- 目标（v0.1）
  - 面向公开网页的“文本舆情”MVP：检索→清洗去重→相关性排序→摘要与观点倾向→模板化报告。
  - 输入：问题与约束（主题、时间窗、平台偏好）。
  - 输出：Markdown 报告（结论摘要、代表性链接、简要观点分布、风险与建议）。
- 非目标（暂不包含）
  - 登录态平台的抓取与评论层大规模采集。
  - 图片/视频内容理解（多模态）。
  - 内部数据库/RAG 深度分析。
  - 多轮论坛协作的复杂策略。

## 交付物（v0.1）
- 运行主流程的命令行入口。
- 报告生成的 Markdown 文件，带版本号与时间戳。
- 配置文件（关键词、时间窗、结果配额、排序权重、停止条件）。

## 模块清单（MVP 保留 C1）
- Orchestrator（主程序与调度）：组织一轮或两轮的检索与分析。
- IntentParser（可选）：规则/LLM 把问题拆成关键词与约束。
- QueryAgent（核心）：并行检索文本结果，聚合多个 SearchAdapter。
- SearchAdapter（适配器集合）：通用搜索/新闻源/社区站点适配，统一结构输出。
- Parser/Normalizer：字段标准化、摘要提取、时间与来源规范。
- DedupCanon：按链接、标题相似度去重归一。
- RelevanceScorer：相关性与质量打分（关键词匹配、时间新鲜度、来源权威）。
- Summarizer：TopN 摘要与观点倾向（词典/规则）。
- ReportGenerator：模板化报告生成与存档（Markdown）。
- ConfigManager：配置与版本管理。

## 配置参数（建议）
- `max_results_per_source`: 每来源最大结果数（默认20）。
- `time_window_days`: 时间窗（默认30天）。
- `sources`: 来源列表（如 duckduckgo/news/community）。
- `relevance_weights`: 打分权重（关键词/时间/来源）。
- `stop_thresholds`: 停止条件（来源多样性、结论稳定性、边际收益）。
- `output_dir`: 报告输出目录。
- `version`: 当前版本号（每次改动必增）。

## 验收标准（v0.1）
- 报告可生成且包含：结论摘要、≥10条代表性链接、简要观点分布、风险建议、数据说明、版本号。
- 数据清洗规范：时间与来源统一，明显重复去除，广告/低质页过滤。
- 稳定性：同一问题多次运行结果差异可解释（非算法波动导致）。

## 迭代路线图（方向来自 BettaFish）
- v0.1.1：适配更多来源；增强去重与排序；增加一轮简化迭代。
- v0.2.0：引入 ForumEngine 的多轮协作（主持人策略）；冲突识别与解释。
- v0.2.1：接入评论层的轻量抓取（不登录、不重度反爬）。
- v0.3.0：接入 Media Agent（图片/视频解析）；证据多模态化。
- v0.3.1：接入 Insight Agent（内部库/RAG/统计模型）；提供对照与趋势。
- v0.4.0：Web 服务（Flask UI 或 API）；任务队列与日志监控；版本化数据存档。
- v0.4.1：报告可视化图表（词频、平台分布、时间线）。

## 风险与规避
- 反爬与合规：遵守站点规则；限速与重试；尽量使用公开检索接口。
- 数据偏差：来源多样性与时间窗控制，避免过度集中某单一平台。
- 结论误导：报告中明确“初步画像”；强调证据链与不确定性。

## 更新记录
- v0.1.0：新增 v0.1 范围与迭代规划文档。